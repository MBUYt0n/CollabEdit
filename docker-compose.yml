version: "3.8"

networks:
    collab:

services:
    server:
        image: server
        container_name: server
        networks:
            - collab
        volumes:
            - ./src:/home/CollabEdit/src
        ports:
            - "8080:8080"
        command: ["node", "src/server.js"]

    web:
        image: node:18-alpine
        container_name: web
        networks:
            - collab
        volumes:
            - ./src:/usr/src/
        working_dir: /usr/src
        command: ["npx", "http-server", ".", "-p", "8000", "-c-1", "--cors"]
        ports:
            - "8000:8000"

    web1:
        image: node:18-alpine
        container_name: web1
        networks:
            - collab
        volumes:
            - ./src:/usr/src/
        working_dir: /usr/src
        command: ["npx", "http-server", ".", "-p", "8001", "-c-1", "--cors"]
        ports:
            - "8001:8001"
